<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Ollama Chat Interface</title>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <!-- Sidebar -->
  <div id="sidebar" class="sidebar">
    <div class="sidebar-header">
      <button id="sidebar-new-chat-btn" class="sidebar-new-chat-btn">+ New Chat</button>
    </div>
    <div id="conversation-list" class="conversation-list">
      <!-- Conversations will be populated here -->
    </div>
  </div>

  <!-- Sidebar Toggle Button -->
  <button id="sidebar-toggle" class="sidebar-toggle">‚ò∞</button>

  <!-- Sidebar Overlay for Mobile -->
  <div id="sidebar-overlay" class="sidebar-overlay"></div>

  <div class="main-content">
  <div class="container">
    <div class="header">
      <h1>AI Chat Interface</h1>
      <div class="controls">
        <button id="speakerToggle" class="speaker-btn" title="Toggle voice responses">üîá</button>
        <select id="providerSelect" class="provider-select">
          <option value="">Select a provider</option>
        </select>
        <select id="modelSelect" class="model-select">
          <option value="">Select a model</option>
        </select>
        <button id="settingsBtn" class="settings-btn" title="Settings">‚öôÔ∏è</button>
        <button id="memoryBtn" class="memory-panel-btn" title="Memory">&#x1F9E0;</button>
        <button id="newChatBtn" class="new-chat-btn">New Chat</button>
      </div>
      <!-- SquatchServe Model Status -->
      <div id="modelStatusBar" class="model-status-bar" style="display: none;">
        <span id="modelStatusText" class="model-status-text">No model loaded</span>
        <button id="unloadModelBtn" class="unload-btn" style="display: none;" title="Unload model to free VRAM">Unload</button>
      </div>
    </div>

    <div id="chatContainer" class="chat-container">
      <div id="messages" class="messages"></div>
      <div id="typingIndicator" class="typing-indicator" style="display: none;">
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
        <div class="typing-dot"></div>
      </div>
    </div>
    
    <div class="input-area">
      <textarea id="messageInput" class="message-input" placeholder="Type your message..." rows="1"></textarea>
      <button id="micBtn" class="mic-btn" title="Hold to talk">üé§</button>
      <button id="convoModeBtn" class="convo-btn" title="Toggle conversation mode">üí¨</button>
      <button id="searchToggleBtn" class="search-btn" title="Toggle AI tools (web search, etc.)">üîç</button>
      <button id="sendBtn" class="send-btn">Send</button>
    </div>
  </div>

  <!-- Memory Panel (right side slide-out) -->
  <div id="memoryPanel" class="memory-panel">
    <div class="memory-panel-header">
      <h2>Memory</h2>
      <button id="memoryPanelClose" class="close-btn">&times;</button>
    </div>
    <div class="memory-panel-tabs">
      <button class="memory-tab active" data-tab="facts">Facts</button>
      <button class="memory-tab" data-tab="clusters">Clusters</button>
      <button class="memory-tab" data-tab="daily">Daily</button>
      <button class="memory-tab" data-tab="search">Search</button>
    </div>
    <div class="memory-panel-content">
      <!-- Facts Tab -->
      <div id="memoryTabFacts" class="memory-tab-content active">
        <div class="memory-add-fact">
          <input type="text" id="memoryAddFactInput" placeholder="Add a fact..." />
          <button id="memoryAddFactBtn">+</button>
        </div>
        <div id="memoryFactsList" class="memory-facts-list">
          <div class="memory-loading">Loading facts...</div>
        </div>
      </div>
      <!-- Clusters Tab -->
      <div id="memoryTabClusters" class="memory-tab-content">
        <div id="memoryClustersList" class="memory-clusters-list">
          <div class="memory-loading">Loading clusters...</div>
        </div>
      </div>
      <!-- Daily Tab -->
      <div id="memoryTabDaily" class="memory-tab-content">
        <div id="memoryDailyContent" class="memory-daily-content">
          <div class="memory-loading">Loading daily logs...</div>
        </div>
      </div>
      <!-- Search Tab -->
      <div id="memoryTabSearch" class="memory-tab-content">
        <div class="memory-search-bar">
          <input type="text" id="memorySearchInput" placeholder="Search memory..." />
          <button id="memorySearchBtn">Search</button>
        </div>
        <div id="memorySearchResults" class="memory-search-results"></div>
      </div>
    </div>
  </div>
  <div id="memoryPanelOverlay" class="memory-panel-overlay"></div>

  <!-- Settings Modal -->
  <div id="settingsModal" class="modal" style="display: none;">
    <div class="modal-content">
      <div class="modal-header">
        <h2>Settings</h2>
        <button id="closeModal" class="close-btn">&times;</button>
      </div>
      <div class="modal-body">
        <div class="settings-section">
          <h3>API Keys</h3>
          <p class="settings-hint">API keys are stored locally in your browser</p>

          <div class="setting-item">
            <label for="claudeApiKey">Claude API Key</label>
            <div class="api-key-input-wrapper">
              <input type="password" id="claudeApiKey" class="api-key-input" placeholder="sk-ant-...">
              <button class="toggle-visibility-btn" data-target="claudeApiKey">üëÅÔ∏è</button>
            </div>
          </div>

          <div class="setting-item">
            <label for="openaiApiKey">OpenAI API Key</label>
            <div class="api-key-input-wrapper">
              <input type="password" id="openaiApiKey" class="api-key-input" placeholder="sk-...">
              <button class="toggle-visibility-btn" data-target="openaiApiKey">üëÅÔ∏è</button>
            </div>
          </div>

          <div class="setting-item">
            <label for="grokApiKey">Grok API Key</label>
            <div class="api-key-input-wrapper">
              <input type="password" id="grokApiKey" class="api-key-input" placeholder="xai-...">
              <button class="toggle-visibility-btn" data-target="grokApiKey">üëÅÔ∏è</button>
            </div>
          </div>

          <div class="setting-item">
            <label for="ollamaHost">Ollama Host (optional)</label>
            <input type="text" id="ollamaHost" class="api-key-input" placeholder="http://localhost:11434">
          </div>

          <div class="setting-item">
            <label for="squatchserveHost">SquatchServe Host (optional)</label>
            <input type="text" id="squatchserveHost" class="api-key-input" placeholder="http://localhost:8111">
          </div>

          <div class="setting-item">
            <label for="llamacppHost">Llama.cpp Server URL (optional)</label>
            <input type="text" id="llamacppHost" class="api-key-input" placeholder="http://localhost:8080">
          </div>

          <div class="setting-item">
            <label for="searxngHost">SearXNG Host (optional)</label>
            <input type="text" id="searxngHost" class="api-key-input" placeholder="http://192.168.4.97:8888">
          </div>
        </div>
      </div>
      <div class="modal-footer">
        <button id="saveSettings" class="save-btn">Save</button>
      </div>
    </div>
  </div>

  </div>

    <script>document.write('<script src="script.js?v=' + Date.now() + '"><\/script>');</script>
</body>
</html>